<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
    "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % commondata SYSTEM "../entities/common.ent" > %commondata;
]>

<appendix id="configuration-files">
<title>Fichiers de configuration</title>

<section id="scripts/clean">
<title>Fichier <filename>scripts/clean</filename></title>
   <programlistingco>
          <areaspec>
            <area id="clean-4"      coords="4"/>
            <area id="clean-7"      coords="7"/>
            <area id="clean-9"      coords="9"/>
            <area id="clean-11"      coords="11"/>
            <area id="clean-12"      coords="12"/>
            <area id="clean-13"      coords="13"/>
            <area id="clean-14"      coords="14"/>
            <area id="clean-15"      coords="15"/>
            <area id="clean-16"      coords="16"/>
            <area id="clean-17"      coords="17"/>
            <area id="clean-18"      coords="18"/>
            <area id="clean-19"      coords="19"/>
            <area id="clean-20"      coords="20"/>
            <area id="clean-25"      coords="25"/>
            <area id="clean-30"      coords="30"/>
          </areaspec>
          <programlisting language="bash" linenumbering="numbered"><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../../../scripts/clean" parse="text" encoding="utf-8"/></programlisting>
        </programlistingco>
        <calloutlist>
            <callout arearefs="clean-4">
              <para>Définition du répertoire de travail.</para>
            </callout>
            <callout arearefs="clean-7">
              <para>Prise en compte des fonctions de live-helper.</para>
            </callout>
            <callout arearefs="clean-9">
              <para>Nettoyage des répertoires dont le chroot.</para>
            </callout>
            <callout arearefs="clean-11">
              <para>Suppression de l'historique de lh_build.</para>
            </callout>
            <callout arearefs="clean-12">
              <para>Suppression du cache et du fichier .stage qui est utilisé comme historique lors de lh_build.</para>
            </callout>
            <callout arearefs="clean-13">
              <para>Suppression des fichiers générés par lh_config.</para>
            </callout>
            <callout arearefs="clean-14">
              <para>Suppression des images de la documentation dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-15">
              <para>Suppression des images de la documentation dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-16">
              <para>Suppression des répertoires copiés lors du lh_build dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-17">
              <para>Suppression du patch de libssh0.2 dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-18">
              <para>Suppression de phpmyadmin dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-19">
              <para>Suppression des IOS dans le pré-chroot.</para>
            </callout>
            <callout arearefs="clean-20">
              <para>Suppression de la documentation packagé et de itrafgen.</para>
            </callout>
            <callout arearefs="clean-25">
              <para>Suppression de tout les sous répertoires vide.</para>
            </callout>
            <callout arearefs="clean-30">
              <para>Suppression du répertoire config si il est vide.</para>
            </callout>
          </calloutlist>
</section>
<section id="scripts/config">
<title>Fichier <filename>scripts/config</filename></title>
   <programlistingco>
          <areaspec>
            <area id="config-4"      coords="4"/>
            <area id="config-7"      coords="7"/>
            <area id="config-11"      coords="11"/>
            <area id="config-14"      coords="14"/>
            <area id="config-17"      coords="17"/>
            <area id="config-23"      coords="23"/>
            <area id="config-24"      coords="24"/>
            <area id="config-25"      coords="25"/>
            <area id="config-26"      coords="26"/>
            <area id="config-27"      coords="27"/>
            <area id="config-28"      coords="28"/>
            <area id="config-29"      coords="29"/>
            <area id="config-30"      coords="30"/>
            <area id="config-31"      coords="31"/>
            <area id="config-32"      coords="32"/>
            <area id="config-33"      coords="33"/>
            <area id="config-34"      coords="34"/>
            <area id="config-35"      coords="35"/>
            <area id="config-36"      coords="36"/>
            <area id="config-37"      coords="37"/>
            <area id="config-38"      coords="38"/>
            <area id="config-39"      coords="39"/>
            <area id="config-40"      coords="40"/>
            <area id="config-41"      coords="41"/>
            <area id="config-42"      coords="42"/>
            <area id="config-43"      coords="43"/>
            <area id="config-44"      coords="44"/>
            <area id="config-45"      coords="45"/>
            <area id="config-46"      coords="46"/>
            <area id="config-47"      coords="47"/>
            <area id="config-48"      coords="48"/>
            <area id="config-49"      coords="49"/>
            <area id="config-50"      coords="50"/>
            <area id="config-51"      coords="51"/>
            <area id="config-52"      coords="52"/>
            <area id="config-53"      coords="53"/>
          </areaspec>
          <programlisting language="bash" linenumbering="numbered"><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../../../scripts/config" parse="text" encoding="utf-8"/></programlisting>
        <calloutlist>
            <callout arearefs="config-4">
              <para>Définition du répertoire de travail.</para>
            </callout>
            <callout arearefs="config-7">
              <para>Prise en compte des fonctions de live-helper.</para>
            </callout>
            <callout arearefs="config-11">
              <para>Utilisation ou non d'un miror.</para>
            </callout>
            <callout arearefs="config-14">
              <para>Si un miroir est utilisé, on le déclare.</para>
            </callout>
            <callout arearefs="config-17">
              <para>Dans le cas contraire, on utilise les miroirs officiels.</para>
            </callout>
            <callout arearefs="config-23">
              <para>On indique à lh_config qu'il doit prendre en compte scripts/config.</para>
            </callout>
            <callout arearefs="config-24">
              <para>Apt-get doit seulement installer les paquets nécessaires et pas ceus juste recommandés.</para>
            </callout>
            <callout arearefs="config-25">
              <para>Sélection de l'architecture i386.</para>
            </callout>
            <callout arearefs="config-26">
              <para>Système de fichier fat32.</para>
            </callout>
            <callout arearefs="config-27">
              <para>Passage de paramètres locaux au démarrage.</para>
            </callout>
            <callout arearefs="config-28">
              <para>Passage de paramètres locaux au démarrage.</para>
            </callout>
            <callout arearefs="config-29">
              <para>Sélection du gestionnaire de boot grub.</para>
            </callout>
            <callout arearefs="config-30">
              <para>Sélection des paquets dans les catégories main non-free et contrib.</para>
            </callout>
            <callout arearefs="config-31">
              <para>Sélection de la distribution squeeze (testing).</para>
            </callout>
            <callout arearefs="config-32">
              <para>Sélection du fichier d'arrière plan au démarrage.</para>
            </callout>
            <callout arearefs="config-33">
              <para>Sélection du nom de machine.</para>
            </callout>
            <callout arearefs="config-34">
              <para>Sélection du système de fichier live.</para>
            </callout>
            <callout arearefs="config-35">
              <para>Nom de l'image iso.</para>
            </callout>
            <callout arearefs="config-36">
              <para>Nom du préparateur de l'image iso.</para>
            </callout>
            <callout arearefs="config-37">
              <para>Nom de l'éditeur de l'image iso.</para>
            </callout>
            <callout arearefs="config-38">
              <para>Nom du volume de l'image iso avec la date.</para>
            </callout>
            <callout arearefs="config-39">
              <para>Nom de l'archive qui contient les clefs publiques des dépôts.</para>
            </callout>
            <callout arearefs="config-40">
              <para>Sélection du langage.</para>
            </callout>
            <callout arearefs="config-41">
              <para>Sélection des noyaux installés.</para>
            </callout>
            <callout arearefs="config-42">
              <para>Sélection des paquetages relatives au noyau et au système de fichier.</para>
            </callout>
            <callout arearefs="config-43">
              <para>Sélection des miroirs pour création de la distribution.</para>
            </callout>
            <callout arearefs="config-44">
              <para>Sélection des mirrors finaux dans /etc/apt/sources.list</para>
            </callout>
            <callout arearefs="config-45">
              <para>Sélection des mirrors finaux dans /etc/apt/sources.list</para>
            </callout>
            <callout arearefs="config-46">
              <para>Sélection des miroirs une fois dans le chroot.</para>
            </callout>
            <callout arearefs="config-47">
              <para>Sélection des miroirs une fois dans le chroot.</para>
            </callout>
            <callout arearefs="config-48">
              <para>Liste des paquets à installer</para>
            </callout>
            <callout arearefs="config-49">
              <para>Désactivation du téléchargement des mises à jour de sécurité.</para>
            </callout>
            <callout arearefs="config-50">
              <para>Sélection du système de fichier volatile.</para>
            </callout>
            <callout arearefs="config-51">
              <para>Sélection du nom d'utilisteur.</para>
            </callout>
            <callout arearefs="config-52">
              <para>Afficher beaucoup d'informations.</para>
            </callout>
            <callout arearefs="config-53">
              <para>Prendre en compte les arguments passés en ligne de commande.</para>
            </callout>
          </calloutlist>
        </programlistingco>
</section>
<section id="scripts/build">
<title>Fichier <filename>scripts/build</filename></title>
   <programlistingco>
          <areaspec>
            <area id="build-4"      coords="4"/>
            <area id="build-7"      coords="7"/>
            <area id="build-10"      coords="10"/>
            <area id="build-11"      coords="11"/>
            <area id="build-15"      coords="15"/>
            <area id="build-18"      coords="18"/>
            <area id="build-27"      coords="27"/>
            <area id="build-34"      coords="34"/>
            <area id="build-37"      coords="37"/>
            <area id="build-40"      coords="40"/>
            <area id="build-49"      coords="49"/>
            <area id="build-53"      coords="53"/>
            <area id="build-57"      coords="57"/>
            <area id="build-61"      coords="61"/>
            <area id="build-70"      coords="70"/>
            <area id="build-74"      coords="74"/>
            <area id="build-76"      coords="76"/>
            <area id="build-80"      coords="80"/>
            <area id="build-85"      coords="85"/>
            <area id="build-89"      coords="89"/>
            <area id="build-91"      coords="91"/>
            <area id="build-95"      coords="95"/>
            <area id="build-97"      coords="97"/>
            <area id="build-98"      coords="98"/>
            <area id="build-102"      coords="102"/>
            <area id="build-108"      coords="108"/>
            <area id="build-119"      coords="119"/>
          </areaspec>
          <programlisting language="bash" linenumbering="numbered"><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../../../scripts/build" parse="text" encoding="utf-8"/></programlisting>
        </programlistingco>
        <calloutlist>
            <callout arearefs="build-4">
              <para>Définition du répertoire de travail.</para>
            </callout>
            <callout arearefs="build-7">
              <para>Prise en compte des fonctions de live-helper.</para>
            </callout>
            <callout arearefs="build-10">
              <para>Création de la documentation et copie dans le pré-chroot.</para>
            </callout>
            <callout arearefs="build-11">
              <para>Nettoyage des fichiers générés par la documentation.</para>
            </callout>
            <callout arearefs="build-15">
              <para>Téléchargement ou non des IOS.</para>
            </callout>
            <callout arearefs="build-18">
              <para>Définition des urls de Netkit et Visual Netkit.</para>
            </callout>
            <callout arearefs="build-27">
              <para>Définition des urls d'Hydra.</para>
            </callout>
            <callout arearefs="build-34">
              <para>Définition de l'url de Metasploit.</para>
            </callout>
            <callout arearefs="build-37">
              <para>Définition de l'url de Phpmyadmin.</para>
            </callout>
            <callout arearefs="build-40">
              <para>Définition des urls des IOS.</para>
            </callout>
            <callout arearefs="build-49">
              <para>Définition de l'url de Itrafgen</para>
            </callout>
            <callout arearefs="build-53">
              <para>Création d'un répertoire de cache.</para>
            </callout>
            <callout arearefs="build-57">
              <para>Téléchargement de netkit.</para>
            </callout>
            <callout arearefs="build-61">
              <para>Les serveurs de google ne supportent pas la reprise de télécharement. Par consquent, on vérifie si le fichier existe avant de la télécharger.</para>
            </callout>
            <callout arearefs="build-70">
              <para>Téléchargement d'Hydra.</para>
            </callout>
            <callout arearefs="build-74">
              <para>Téléchargement de Metasploit.</para>
            </callout>
            <callout arearefs="build-76">
              <para>Téléchargement de PHPmyadmin.</para>
            </callout>
            <callout arearefs="build-80">
              <para>Décompression des archives de Netkit.</para>
            </callout>
            <callout arearefs="build-85">
              <para>Décompression des archives d'Hydra et copie du patch.</para>
            </callout>
            <callout arearefs="build-89">
              <para>Décompression de Metasploit.</para>
            </callout>
            <callout arearefs="build-91">
              <para>Décompression de PHPmyadmin et copie des fichier dans le futur /var/www/</para>
            </callout>
            <callout arearefs="build-95">
              <para>Copie du paquet d'Itrafgen.</para>
            </callout>
            <callout arearefs="build-97">
              <para>Vérification pour le téléchargement des IOS.</para>
            </callout>
            <callout arearefs="build-98">
              <para>Avertissement qui indique qu'il faut être connecté au réseaux de l'IUT de St-Malo pour télécharger les IOS sur le serveur de partage restore.</para>
            </callout>
            <callout arearefs="build-102">
              <para>Téléchargement des IOS.</para>
            </callout>
            <callout arearefs="build-108">
              <para>Copie des IOS dans le pré-chroot</para>
            </callout>
            <callout arearefs="build-119">
              <para>Lancement de la création de la distribution avec redirection de la sortie vers le fichier build.log</para>
            </callout>
          </calloutlist>
</section>
<section id="scripts/doc.sh">
<title>Fichier <filename>scripts/doc.sh</filename></title>
   <programlistingco>
          <areaspec>
            <area id="doc.sh-4"      coords="4"/>
            <area id="doc.sh-8"      coords="8"/>
            <area id="doc.sh-10"      coords="10"/>
            <area id="doc.sh-12"      coords="12"/>
            <area id="doc.sh-18"      coords="18"/>
            <area id="doc.sh-22"      coords="22"/>
            <area id="doc.sh-23"      coords="23"/>
            <area id="doc.sh-24"      coords="24"/>
            <area id="doc.sh-25"      coords="25"/>
            <area id="doc.sh-28"      coords="28"/>
            <area id="doc.sh-31"      coords="31"/>
            <area id="doc.sh-32"      coords="32"/>
            <area id="doc.sh-36"      coords="36"/>
            <area id="doc.sh-38"      coords="38"/>
            <area id="doc.sh-43"      coords="43"/>
            <area id="doc.sh-45"      coords="45"/>
            <area id="doc.sh-50"      coords="50"/>
          </areaspec>
          <programlisting language="bash" linenumbering="numbered"><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../../../scripts/doc.sh" parse="text" encoding="utf-8"/></programlisting>
        </programlistingco>
        <calloutlist>
            <callout arearefs="doc.sh-4">
              <para>Prise en compte des fonctions de live-helper.</para>
            </callout>
            <callout arearefs="doc.sh-8">
              <para>Récupération du premier argument passé lors de l'appel du script.</para>
            </callout>
            <callout arearefs="doc.sh-10">
              <para>On vérifie si le script est lancé en mode auto.</para>
            </callout>
            <callout arearefs="doc.sh-12">
              <para>On vérifie que le script est alors uniquement lancé à partir du script lh_build.</para>
            </callout>
            <callout arearefs="doc.sh-18">
              <para>On définit le répertoire de travail.</para>
            </callout>
            <callout arearefs="doc.sh-22">
              <para>On définit le numéro de version du paquet.</para>
            </callout>
            <callout arearefs="doc.sh-23">
              <para>Création du paquet.</para>
            </callout>
            <callout arearefs="doc.sh-24">
              <para>Nettoyage des fichiers temporaires.</para>
            </callout>
            <callout arearefs="doc.sh-25">
              <para>Création du répertoire dans le pré-chroot.</para>
            </callout>
            <callout arearefs="doc.sh-28">
              <para>Copie des images dans le pré-chroot.</para>
            </callout>
            <callout arearefs="doc.sh-32">
              <para>On vérifie si la documentation est générée manuellement. </para>
            </callout>
            <callout arearefs="doc.sh-36">
              <para>Compilation de la documentation via le Makefile.</para>
            </callout>
            <callout arearefs="doc.sh-38">
              <para>On vérifie si on doit nettoyer la documentation.</para>
            </callout>
            <callout arearefs="doc.sh-43">
              <para>Nettoyage de la documentation via le Makefile.</para>
            </callout>
            <callout arearefs="doc.sh-45">
              <para>Suppression du paquet généré.</para>
            </callout>
            <callout arearefs="doc.sh-50">
              <para>Si le script n'a pas été appelé avec l'une des options précédente, on rappel l'utilisation du script.</para>
            </callout>
          </calloutlist>
</section>

</appendix>
